<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>逆向破解学校在线考试客户端 - zu1k</title><meta name=Description content="zu1k"><meta property="og:title" content="逆向破解学校在线考试客户端"><meta property="og:description" content="前言 近期，学校开始测试线上考试系统，据说十分流氓，开搞！ 从大一学弟那里拿到了相关程序和说明文档，经过学弟的使用体验，程序开始运行会自动杀死Q"><meta property="og:type" content="article"><meta property="og:url" content="https://lgf.im/posts/security/reverse/crack-sdu-online-exam-software/"><meta property="og:image" content="https://lgf.im/logo.png"><meta property="article:published_time" content="2020-05-01T21:44:54+00:00"><meta property="article:modified_time" content="2020-10-20T13:47:57+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://lgf.im/logo.png"><meta name=twitter:title content="逆向破解学校在线考试客户端"><meta name=twitter:description content="前言 近期，学校开始测试线上考试系统，据说十分流氓，开搞！ 从大一学弟那里拿到了相关程序和说明文档，经过学弟的使用体验，程序开始运行会自动杀死Q"><meta name=application-name content="zu1k"><meta name=apple-mobile-web-app-title content="zu1k"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://lgf.im/posts/security/reverse/crack-sdu-online-exam-software/><link rel=prev href=https://lgf.im/posts/linux/linux-add-swap/><link rel=next href=https://lgf.im/posts/learn/how-do-onion-service-work/><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.1e2694bed152fa2922dbe909a441838ed693d88b1330f97485bfa8ed78da42df.css integrity="sha256-HiaUvtFS+iki2+kJpEGDjtaT2IsTMPl0hb+o7XjaQt8="><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"逆向破解学校在线考试客户端","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/lgf.im\/posts\/security\/reverse\/crack-sdu-online-exam-software\/"},"image":[{"@type":"ImageObject","url":"https:\/\/lgf.im\/images\/Apple-Devices-Preview.png","width":3200,"height":2048}],"genre":"posts","keywords":"reverse, sdu, coding, crack","wordcount":2419,"url":"https:\/\/lgf.im\/posts\/security\/reverse\/crack-sdu-online-exam-software\/","datePublished":"2020-05-01T21:44:54+00:00","dateModified":"2020-10-20T13:47:57+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"zu1k","logo":{"@type":"ImageObject","url":"https:\/\/lgf.im\/images\/logo.jpg","width":640,"height":640}},"author":{"@type":"Person","name":"zu1k"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=zu1k>zu1k</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/about/>关于 </a><a class=menu-item href=https://github.com/zu1k title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i></a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=zu1k>zu1k</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/>文章</a><a class=menu-item href=/tags/>标签</a><a class=menu-item href=/categories/>分类</a><a class=menu-item href=/about/>关于</a><a class=menu-item href=https://github.com/zu1k title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i></a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">逆向破解学校在线考试客户端</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://lgf.im title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw"></i>zu1k</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/reverse/><i class="far fa-folder fa-fw"></i>reverse</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2020-05-01>2020-05-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 2419 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 5 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#开搞>开搞</a><ul><li><a href=#基本信息>基本信息</a></li><li><a href=#正着走>正着走</a></li><li><a href=#去除杀进程>去除杀进程</a></li><li><a href=#去除隐藏任务栏>去除隐藏任务栏</a></li><li><a href=#去除强制全屏>去除强制全屏</a></li><li><a href=#恢复窗口和按钮>恢复窗口和按钮</a></li><li><a href=#绕过摄像头检查>绕过摄像头检查</a></li><li><a href=#其他地方>其他地方</a></li></ul></li><li><a href=#申明与文件>申明与文件</a></li></ul></nav></div></div><div class=content id=content><h2 id=前言>前言</h2><p>近期，学校开始测试线上考试系统，据说十分流氓，开搞！</p><p>从大一学弟那里拿到了相关程序和说明文档，经过学弟的使用体验，程序开始运行会自动杀死QQ、微信等程序，隐藏并屏蔽任务栏和开始菜单，强制全屏并屏蔽一些常用的快捷键包括窗口切换等。</p><h2 id=开搞>开搞</h2><h3 id=基本信息>基本信息</h3><p>在虚拟机里安装程序后，先观察一下安装目录结构和里面的文件</p><p><img class=lazyload src=/svg/loading.min.svg data-src=1.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/1.png, 1.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/1.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/1.png title=安装目录结构></p><p>仔细查看了各个文件夹下的内容，最终得出结论，是个QT编写的套壳浏览器，用的 QtWebEngine</p><p>查看主程序的信息，32位未加壳C++程序，本身非常小，只有不到1M，大部分功能应该都是调库实现的</p><p><img class=lazyload src=/svg/loading.min.svg data-src=2.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/2.png, 2.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/2.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/2.png title=查看主程序PE信息></p><p>下面开始逆向，拖入IDA 32位，自动定位到入口函数start，从执行流图中可以看到程序本身结构非常简单</p><h3 id=正着走>正着走</h3><p>下面从start开始分析</p><p><img class=lazyload src=/svg/loading.min.svg data-src=3.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/3.png, 3.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/3.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/3.png title=start函数汇编></p><p>可以看到一开始start函数的栈指针分析就出问题了，但是start本身的调用非常简单，不妨来看一下
首先是 第一个call指令，进入这个函数</p><p><img class=lazyload src=/svg/loading.min.svg data-src=4.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/4.png, 4.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/4.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/4.png title=start第一个call></p><p>发现是 security_cookie检查，没有什么实际作用</p><p>第二个是个无条件跳转 jmp，进去看一下</p><p><img class=lazyload src=/svg/loading.min.svg data-src=5.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/5.png, 5.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/5.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/5.png title=start第二个jmp></p><p>可以看到这一段东西比较多，特别是各种不知道什么作用的call非常多，并且自动反编译出问题了，这个反编译问题应该是比较好解决的，我没有深究</p><p>简单看了一下调用的call，越深入越复杂，到这里分析不下去了，东西有点多，从其他方面入手</p><h3 id=去除杀进程>去除杀进程</h3><p>先来看一下字符串，很幸运字符串没有进行加密，因为我们知道程序会杀死qq，不如直接来搜索关键字QQ</p><p><img class=lazyload src=/svg/loading.min.svg data-src=6.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/6.png, 6.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/6.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/6.png title=string搜索qq></p><p>看一下交叉引用</p><p><img class=lazyload src=/svg/loading.min.svg data-src=7.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/7.png, 7.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/7.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/7.png title=交叉引用></p><p>只有一个函数调用了它，先进入看看这个函数，关键部分如下</p><p><img class=lazyload src=/svg/loading.min.svg data-src=8.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/8.png, 8.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/8.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/8.png title=引用该处的函数></p><p>这就比较清楚了，程序是通过QProcess调用taskkill命令来强制来杀死这些程序的，会被杀死的程序包括实时聊天软件qq、微信，远程协助软件teamviwer、向日葵远程控制。</p><p>在这里我们需要去除这个杀死进程的机制，直接将执行的命令字符串给清空就行</p><h3 id=去除隐藏任务栏>去除隐藏任务栏</h3><p>同时这段命令所在的这个函数在前面还有一堆对QtWebEngine的初始化</p><p><img class=lazyload src=/svg/loading.min.svg data-src=9.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/9.png, 9.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/9.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/9.png title=QtWebEngine的初始化></p><p>这个函数后面的部分有点意思，看到了一些字符串不清楚什么意思</p><p><img class=lazyload src=/svg/loading.min.svg data-src=10.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/10.png, 10.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/10.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/10.png title=有意思的代码></p><p>我个人对tray比较敏感，因为做过任务栏图标程序的开发，知道任务栏的英文是tray</p><p>这里对 Shell_TrayWhd 进行搜索</p><p><img class=lazyload src=/svg/loading.min.svg data-src=11.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/11.png, 11.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/11.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/11.png title=系统特殊窗口句柄></p><p>发现windows系统有一些特殊的窗口句柄，而这个正式任务栏窗口句柄</p><p>一开始我还对这个考试程序怎么隐藏任务栏感兴趣，现在都一目了然了，先通过系统函数获得句柄，然后调用ShowWindow将窗口设置为不显示</p><p>这里的ProgMan是任务管理器，所以说这段代码同时屏蔽了任务栏、开始菜单和任务管理器</p><p>我们需要去除这种屏蔽机制，这也非常简单，来看汇编</p><p><img class=lazyload src=/svg/loading.min.svg data-src=12.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/12.png, 12.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/12.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/12.png title=汇编></p><p>发现在调用showwindow前需要将参数 True or False push入栈，也就是 call ShowWindow前面的push 0，只需要修改这几处汇编即可</p><p><img class=lazyload src=/svg/loading.min.svg data-src=13.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/13.png, 13.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/13.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/13.png title=IDA中进行patch></p><p><img class=lazyload src=/svg/loading.min.svg data-src=14.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/14.png, 14.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/14.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/14.png title=1></p><p>将push 0修改为push 1即可去除他的屏蔽(后面的分析知道 push 5 比较好)</p><h3 id=去除强制全屏>去除强制全屏</h3><p>下面我们来去除一下窗口全屏，虽然有任务栏可以用了，但是全屏会挡住，不好用</p><p>还是刚刚那个函数，通过不断查交叉应用，最后定位到start第二次jmp后的代码中</p><p><img class=lazyload src=/svg/loading.min.svg data-src=15.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/15.png, 15.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/15.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/15.png title=回到开始></p><p>通过前面对前前后后的call和跳转的分析，可以知道没有啥具体内容，所以还得从刚刚的那个函数入手</p><p>发现后面有一个call</p><p><img class=lazyload src=/svg/loading.min.svg data-src=16.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/16.png, 16.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/16.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/16.png title=后面的一个call></p><p>进入后</p><p><img class=lazyload src=/svg/loading.min.svg data-src=17.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/17.png, 17.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/17.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/17.png title=恢复任务栏></p><p>发现这个函数是要将之前设置的任务栏隐藏等给还原，所以这里应该是要退出了，重要的内容还是在杀死qq的那些操作和这个函数中间的位置</p><p>仔细分析后，找到了关键的地方</p><p><img class=lazyload src=/svg/loading.min.svg data-src=18.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/18.png, 18.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/18.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/18.png title=关键call></p><p><img class=lazyload src=/svg/loading.min.svg data-src=19.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/19.png, 19.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/19.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/19.png title=resize></p><p>这和函数在最后面会获取主屏幕的长和宽，然后调用resize函数设置窗口大小，从而使窗口占满屏幕</p><p>这里看一下汇编</p><p><img class=lazyload src=/svg/loading.min.svg data-src=20.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/20.png, 20.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/20.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/20.png title=汇编></p><p>其实还是比较难搞的，东西比较紧凑，没法插入太多的汇编，又不想进行大改增加一个call，那就只把开始菜单的地方留出来吧，也就是只修改窗口的高</p><p>因为需要先把高入栈，所以前面的宽先存到 esi，我们先不要动这个，先把高减一个数然后push进去再push esi，修改之后如下</p><p><img class=lazyload src=/svg/loading.min.svg data-src=21.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/21.png, 21.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/21.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/21.png title=修改后></p><p>这样显示的窗口就不会挡住任务栏，我们就可以切换窗口了</p><h3 id=恢复窗口和按钮>恢复窗口和按钮</h3><p>后来又想，如果可以手动修改窗口大小就好了，再有个放大、缩小的按钮并且能移动位置就更爽了，那就接着搞</p><p>之前做过qt的开发，知道有一个窗口属性是可以隐藏系统窗口，只显示里面的内容从而使窗口无法修改大小和移动位置</p><p>搜索一番后发现使用的使 setWindowFlags 函数来实现的，那就从imports里面找一下吧</p><p><img class=lazyload src=/svg/loading.min.svg data-src=22.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/22.png, 22.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/22.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/22.png title=imports里找修改窗口属性的函数></p><p><img class=lazyload src=/svg/loading.min.svg data-src=23.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/23.png, 23.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/23.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/23.png title=函数的交叉引用></p><p>看交叉引用然后一个一个进去看，最后定位到一个函数，我给他起名 initWindowsComponent，前面的分析我也都相应的进行改名了，分析起来方便记忆</p><p><img class=lazyload src=/svg/loading.min.svg data-src=24.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/24.png, 24.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/24.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/24.png title=引用的函数></p><p>我这个起名应该是非常贴切了，的确是往窗口里面添加各种菜单按钮组件</p><p><img class=lazyload src=/svg/loading.min.svg data-src=25.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/25.png, 25.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/25.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/25.png title=调用的地方></p><p>在后面找到了setWindowFlags调用，但是因为qt里面用的是枚举类型，编译后都变成数字了，只能去看qt的源码</p><p><img class=lazyload src=/svg/loading.min.svg data-src=26.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/26.png, 26.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/26.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/26.png title=qt源码></p><p>传入的枚举类型使WindowsFlags类型，跟进去后发现又是一个WindowType类型</p><p><img class=lazyload src=/svg/loading.min.svg data-src=27.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/27.png, 27.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/27.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/27.png title=跟进qt源码></p><p>再接着跟进，就看到了全部的内容</p><p><img class=lazyload src=/svg/loading.min.svg data-src=28.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/28.png, 28.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/28.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/28.png title=枚举类型></p><p>2048换成16进制是0x800
<img class=lazyload src=/svg/loading.min.svg data-src=29.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/29.png, 29.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/29.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/29.png title=0x800>
根据代码是无边框类型
<img class=lazyload src=/svg/loading.min.svg data-src=30.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/30.png, 30.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/30.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/30.png title=Fameless></p><p>我们需要的是有边框有放大缩小和关闭按钮，所以需要的类型是</p><p><img class=lazyload src=/svg/loading.min.svg data-src=31.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/31.png, 31.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/31.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/31.png title=需要的类型></p><p>此时还没有关闭按钮，根据计算方式，还需要或上关闭按钮的值</p><p><img class=lazyload src=/svg/loading.min.svg data-src=32.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/32.png, 32.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/32.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/32.png title=关闭按钮的值></p><p>修改这个参数后窗口就可以随意移动、修改大小、缩小或者全屏了。</p><h3 id=绕过摄像头检查>绕过摄像头检查</h3><p>我们还知道这个程序还必须要摄像头检查通过，通过简单的实验，发现摄像头只需要检查通过一次，后面不会重复检查，只会读取device.ini文件，所以我们增加这个文件，并手动指定检查通过</p><p><img class=lazyload src=/svg/loading.min.svg data-src=33.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/33.png, 33.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/33.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/33.png title=device.ini></p><p>同时通过搜索字符串查看交叉引用可以找到需要读取或者写入文件的地方，这里没有深入研究了，谁敢兴趣谁去研究</p><p><img class=lazyload src=/svg/loading.min.svg data-src=34.png data-srcset="/posts/security/reverse/crack-sdu-online-exam-software/34.png, 34.png 1.5x, /posts/security/reverse/crack-sdu-online-exam-software/34.png 2x" data-sizes=auto alt=/posts/security/reverse/crack-sdu-online-exam-software/34.png title=device.ini交叉引用></p><h3 id=其他地方>其他地方</h3><p>在对这个程序探究的过程中，还发现了tab栏和menu栏可以打开显示，但是实际作用不大，就没有管。</p><p>同时通过burp抓包和测试，找到了在线考试的登录接口并发现普通浏览器可以正常使用</p><p>同时通过对相关接口的测试，找到了任意密码修改和个人信息泄露的漏洞</p><h2 id=申明与文件>申明与文件</h2><p>同时本次研究完全以学习为目的，不得将上述内容用作商业或非法，否则一切后果由用户负责。您必须在下载后的24个小时之内，从您的电脑中彻底删除上述内容。</p><p>破解之后的程序 {% asset_link 线上考试.zip [点击下载] %}</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2020-10-20&nbsp;<a class=git-hash href=https://github.com/zu1k/blog/commit/ee974649facf9b4afeb047e71f577c4e330f32c0 target=_blank title="commit by zu1k(i@lgf.im) ee974649facf9b4afeb047e71f577c4e330f32c0: mod">
<i class="fas fa-hashtag fa-fw"></i>ee97464</a></span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/posts/security/reverse/crack-sdu-online-exam-software/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://lgf.im/posts/security/reverse/crack-sdu-online-exam-software/ data-title=逆向破解学校在线考试客户端 data-via=zu1k_lv data-hashtags=reverse,sdu,coding,crack><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="分享到 Tumblr" data-sharer=tumblr data-url=https://lgf.im/posts/security/reverse/crack-sdu-online-exam-software/ data-title=逆向破解学校在线考试客户端 data-tags=reverse,sdu,coding,crack><i class="fab fa-tumblr fa-fw"></i></a><a href=javascript:void(0); title="分享到 Evernote" data-sharer=evernote data-url=https://lgf.im/posts/security/reverse/crack-sdu-online-exam-software/ data-title=逆向破解学校在线考试客户端><i class="fab fa-evernote fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/reverse/>reverse</a>,&nbsp;<a href=/tags/sdu/>sdu</a>,&nbsp;<a href=/tags/coding/>coding</a>,&nbsp;<a href=/tags/crack/>crack</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/linux/linux-add-swap/ class=prev rel=prev title=Linux添加swap><i class="fas fa-angle-left fa-fw"></i>Linux添加swap</a>
<a href=/posts/learn/how-do-onion-service-work/ class=next rel=next title=Tor洋葱服务如何工作>Tor洋葱服务如何工作<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></article></div></main></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.8/lunr.min.js></script><script type=text/javascript src=/lib/lunr/lunr.stemmer.support.min.136b99bd32b0c00924d0a5f80a946f737c958dc96ed527db1d959c3d229bc4b5.js integrity="sha256-E2uZvTKwwAkk0KX4CpRvc3yVjclu1SfbHZWcPSKbxLU="></script><script type=text/javascript src=/lib/lunr/lunr.zh.min.099afa711c93c5f68c18abf5485def06649089efe383835258d0384d53dd1449.js integrity="sha256-CZr6cRyTxfaMGKv1SF3vBmSQie/jg4NSWNA4TVPdFEk="></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{"utterances":{"darkTheme":"github-dark","issueTerm":"url","label":"blog","lightTheme":"github-light","repo":"zu1k/comment"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type=text/javascript src=/js/theme.min.f51938f3065a40ee841bcb558e4330e31fd26c0ea55343fff8770b88b0319a3c.js integrity="sha256-9Rk48wZaQO6EG8tVjkMw4x/SbA6lU0P/+HcLiLAxmjw="></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-TC5F2FT2NP');</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-TC5F2FT2NP" async></script></body></html>